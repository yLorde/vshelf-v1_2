<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VShel | Gerenciar Títulos</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="../styles/global.css">
    <script src="../scripts/popMessage.js"></script>
    <script>
        fetch('http://localhost:1703/minha-lista').then((res) => res.json()).then((data) => {
            document.getElementById('wind').innerHTML += popMessage('Total de Titulos: ' + data.length, 'escuro', 'text-start', '');

            console.log(data);

            console.log(
                data.filter(titulo => titulo.classificacao == 6).length,
            )

            document.getElementById('wind').innerHTML += popMessage(`
            Clássificações dos títulos: <br><br>
            1 Estrela: ${data.filter(titulo => titulo.classificacao == 1).length} <br><hr>
            2 Estrelas: ${data.filter(titulo => titulo.classificacao == 2).length} <br><hr>
            3 Estrelas: ${data.filter(titulo => titulo.classificacao == 3).length} <br><hr>
            4 Estrelas: ${data.filter(titulo => titulo.classificacao == 4).length} <br><hr>
            5 Estrelas: ${data.filter(titulo => titulo.classificacao == 5).length} <br><hr>
            `, 'escuro', 'text-start');

            document.getElementById('wind').innerHTML += popMessage(`
            Abandonado: ${data.filter(titulo => titulo.status == 'abandonado').length} <br><hr>
            Assistindo: ${data.filter(titulo => titulo.status == 'assistindo').length} <br><hr>
            Assistindo novamente: ${data.filter(titulo => titulo.status == 'assistindo novamente').length} <br><hr>
            Nunca assitidos: ${data.filter(titulo => titulo.status == 'nunca assistido').length} <br><hr>
            Já assistido: ${data.filter(titulo => titulo.status == 'já assistido').length} <br><hr>
            `, 'escuro', 'text-start');


            document.getElementById('wind').innerHTML += popMessage(`
            Animes: ${data.filter(titulo => titulo.tipo == 'anime').length} <br><hr>
            Animações: ${data.filter(titulo => titulo.tipo == 'animação').length} <br><hr>
            Filmes: ${data.filter(titulo => titulo.tipo == 'filme').length} <br><hr>
            K-Drama: ${data.filter(titulo => titulo.tipo == 'k-drama').length} <br><hr>
            Live Action: ${data.filter(titulo => titulo.tipo == 'live action').length} <br><hr>
            Livro: ${data.filter(titulo => titulo.tipo == 'livro').length} <br><hr>
            Mini Série: ${data.filter(titulo => titulo.tipo == 'mini serie').length} <br><hr>
            Mangá: ${data.filter(titulo => titulo.tipo == 'mangá').length} <br><hr>
            Série: ${data.filter(titulo => titulo.tipo == 'série').length} <br><hr>
            `, 'escuro', 'text-start');
        });
    </script>
</head>

<body>
    <div id="window">
        <div id="wind"></div>
    </div>
</body>

</html>